parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"NbQW":[function(require,module,exports) {
"use strict";function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getReforge=exports.REFORGES=exports.RARITIES=exports.PREPOPULATE=exports.MOVE_SETS=exports.Reforge=void 0;var n=function(){function r(t,n,o,u,E){e(this,r),this.rarity=t,this.name=n,this.str=o,this.cd=u,this.atkspd=void 0===E?0:E}return t(r,[{key:"shiftWithMoves",value:function(e){var r=this;return(e=e.filter(function(e){return exports.REFORGES[r.rarity].filter(function(r){return r.name===e}).length>0})).filter(function(e){return e!=r.name}).map(function(e){return o(r.rarity,e)})}},{key:"shift",value:function(e){var r=exports.MOVE_SETS[e];return this.shiftWithMoves(r)}}]),r}();function o(e,r){return exports.REFORGES[e].filter(function(e){return e.name===r}).pop()}exports.Reforge=n,exports.MOVE_SETS=["Hurtful","Strong","Forceful"],exports.PREPOPULATE={"Max Damage":{COMMON:["Hurtful"],UNCOMMON:["Hurtful"],RARE:["Hurtful"],EPIC:["Strong"],LEGENDARY:["Strong"],MYTHIC:["Strong"]}},exports.RARITIES=["COMMON","UNCOMMON","RARE","EPIC","LEGENDARY","MYTHIC"],exports.REFORGES={COMMON:[new n("COMMON","Silky",0,5),new n("COMMON","Hurtful",0,4),new n("COMMON","Bloody",1,3,1),new n("COMMON","Forceful",4,0)],UNCOMMON:[new n("UNCOMMON","Silky",0,6),new n("UNCOMMON","Hurtful",0,5),new n("UNCOMMON","Bloody",1,4,1),new n("UNCOMMON","Strange",1,2,2),new n("UNCOMMON","Forceful",5,0)],RARE:[new n("RARE","Silky",0,8),new n("RARE","Hurtful",0,7),new n("RARE","Bloody",1,5,1),new n("RARE","Forceful",7,0)],EPIC:[new n("EPIC","Silky",0,10),new n("EPIC","Hurtful",0,10),new n("EPIC","Bloody",2,6,2),new n("EPIC","Strong",5,5),new n("EPIC","Strange",3,1,4),new n("EPIC","Forceful",10,0)],LEGENDARY:[new n("LEGENDARY","Silky",0,15),new n("LEGENDARY","Hurtful",0,15),new n("LEGENDARY","Bloody",3,9,2),new n("LEGENDARY","Strong",8,8),new n("LEGENDARY","Forceful",15,0)],MYTHIC:[new n("MYTHIC","Silky",0,20),new n("MYTHIC","Hurtful",0,20),new n("MYTHIC","Strong",12,12),new n("MYTHIC","Forceful",20,0)]},exports.getReforge=o;
},{}],"fr1I":[function(require,module,exports) {
"use strict";function t(t,r){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=n(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==e.return||e.return()}finally{if(u)throw o}}}}function n(t,n){if(t){if("string"==typeof t)return r(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(t,n):void 0}}function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function a(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function i(t,n,r){return n&&a(t.prototype,n),r&&a(t,r),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AccessoryBag=void 0;var o=require("./reforges"),s=require("./main"),u=function(){function t(n){var r=this;e(this,t),this.talismans={},n.count.forEach(function(t,n){var e=o.PREPOPULATE["Max Damage"][n];r.talismans[n]=[];for(var a=0;a<t;a++){var i=e[t%e.length];r.talismans[n].push(o.getReforge(n,i))}})}return i(t,[{key:"generateSuccessors",value:function(t,n){var r=this,e=[this],a=function(t){if(!r.talismans.hasOwnProperty(t))return"continue";r.scanPivots(t).flatMap(function(e){return r.talismans[t][e].shiftWithMoves(n).map(function(n){var a=r.clone();return a.talismans[t][e]=n,a.fixOrdering(),a})}).forEach(function(t){return e.push(t)})};for(var i in this.talismans)a(i);console.log(e),e.sort(function(n,r){return r.evaluate(t).crit-n.evaluate(t).crit});for(var o=0;o<e.length;o++)if(e[o]==this){e=e.slice(0,o+1);break}return{bestSuccessors:e,optimal:e[0]===this}}},{key:"scanPivots",value:function(t){var n=[],r=this.talismans[t];if(r.length>0){n.push(0);for(var e=n[0],a=1;a<r.length;a++)e!=n[a]&&(e=n[a],n.push(a))}return n}},{key:"fixOrdering",value:function(){for(var t in this.talismans){if(this.talismans.hasOwnProperty(t))this.talismans[t].sort(function(t,n){return 1e4*(t.cd-n.cd)+100*(t.str-n.str)+t.atkspd*n.atkspd})}}},{key:"clone",value:function(){var n=new t(new s.TalismanCount);for(var r in this.talismans)this.talismans.hasOwnProperty(r)&&(n.talismans[r]=this.talismans[r].slice(0));return n}},{key:"evaluate",value:function(t){var n=t.str,r=t.cd,e=t.atkSpd;for(var a in this.talismans)this.talismans.hasOwnProperty(a)&&this.talismans[a].forEach(function(t){n+=t.str,r+=t.cd,e+=t.atkSpd});var i=(5+t.dmg+Math.floor(n/5))*(1+n/100),o=i+i*(r/100);return{std:i,crit:o,dps:(2+2*Math.min(1,e/100))*o}}},{key:"toString",value:function(){var t=this;return o.RARITIES.map(function(n){var r=n+":\n",e=f(t.talismans[n].map(function(t){return t.name}));for(var a in e)e.hasOwnProperty(a)&&(r+="\t"+a+": "+e[a]+"\n");return r}).join("")}},{key:"aggregateReforges",value:function(){var t=this;return o.RARITIES.map(function(n){return{rarity:n,reforges:f(t.talismans[n].map(function(t){return t.name}))}})}}]),t}();function f(n){var r=new Map;if(n.length>0){var e,a=n[0],i=0,o=t(n);try{for(o.s();!(e=o.n()).done;){var s=e.value;s==a?i++:(r[a]=i,a=s,i=1)}}catch(u){o.e(u)}finally{o.f()}r[a]=i}return r}exports.AccessoryBag=u;
},{"./reforges":"NbQW","./main":"jP6t"}],"jP6t":[function(require,module,exports) {
"use strict";function e(e,o){return r(e)||n(e,o)||a(e,o)||t()}function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(s){o=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}}function r(e){if(Array.isArray(e))return e}function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,i=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TalismanCount=void 0;var s=require("./accessoryBag"),c=require("./reforges"),l=function e(){u(this,e),this.count=new Map};function f(e){document.getElementById(e).addEventListener("change",function(e){return d()})}function d(){var t,n=e(y(),2),r=(n[0],o(n[1]));try{for(r.s();!(t=r.n()).done;){var a=t.value,i=document.getElementById(a.rarity.toLowerCase()+"-max-cd-reforge-guide");for(var u in i.innerText="",a.reforges)if(a.reforges.hasOwnProperty(u)){var s=a.reforges[u],c=document.createElement("div");c.innerText=u+": "+s,i.appendChild(c)}}}catch(l){r.e(l)}finally{r.f()}}function y(){var e=c.MOVE_SETS.slice(0);document.getElementById("reforge-stone-silky").checked&&e.push("Silky");for(var t=new s.AccessoryBag(g()),n=v(),r=0;r<500;r++){var o=t.generateSuccessors(n,e);if(console.log("Generation "+r+" results:\n\n"+o.bestSuccessors[0].toString()),t=o.bestSuccessors[Math.floor(Math.random()*o.bestSuccessors.length)],o.optimal)return console.log("Optimal solution found after "+r+" generations."),[t,t.aggregateReforges()]}console.log("Took too long to compute, interrupting...")}function g(){var e,t=new l,n=o(c.RARITIES);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=r.toLowerCase()+"-talisman-count",i=m(a);i>50&&(i=50,document.getElementById(a).value="50"),t.count.set(r,i)}}catch(u){n.e(u)}finally{n.f()}return t}function m(e){var t=document.getElementById(e).value;return t>0?+t:0}function v(){return{dmg:m("base-dmg"),str:m("base-strength"),cd:m("base-crit-dmg"),atkSpd:m("base-attack-speed")}}exports.TalismanCount=l,document.addEventListener("DOMContentLoaded",function(){var e,t=o(c.RARITIES);try{for(t.s();!(e=t.n()).done;){f(e.value.toLowerCase()+"-talisman-count")}}catch(u){t.e(u)}finally{t.f()}for(var n=0,r=["dmg","strength","crit-dmg","attack-speed"];n<r.length;n++){f("base-"+r[n])}for(var a=0,i=["silky"];a<i.length;a++){f("reforge-stone-"+i[a])}d()});
},{"./accessoryBag":"fr1I","./reforges":"NbQW"}]},{},["jP6t"], null)
//# sourceMappingURL=/main.d0ecfc49.js.map